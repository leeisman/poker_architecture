# ðŸ§  Redis æž¶æ§‹é¸åž‹æŒ‡å—ï¼šCluster vs Sentinel

## ðŸš€ Redis Cluster

### âœ… å„ªé»ž

- **æ°´å¹³æ“´å±•ï¼ˆScalabilityï¼‰**ï¼šå¯é€éŽ slot æ©Ÿåˆ¶æ°´å¹³æ“´å±•ç¯€é»žæ•¸é‡ã€‚
- **è‡ªå‹•åˆ†ç‰‡ï¼ˆShardingï¼‰**ï¼šæ¯ç­†è³‡æ–™é€éŽ slot åˆ†é…è‡³ä¸åŒç¯€é»žï¼Œè‡ªå‹•è² è¼‰å‡è¡¡ã€‚
- **ç„¡å–®é»žï¼ˆDecentralizedï¼‰**ï¼šæ‰€æœ‰ç¯€é»žå…±äº«æ‹“æ’²èˆ‡ç‹€æ…‹ï¼Œä¸ä¾è³´ä¸­å¿ƒä»£ç†ã€‚
- **è‡ªå‹•æ•…éšœè½‰ç§»ï¼ˆFailoverï¼‰**ï¼šReplica ç¯€é»žå¯è‡ªå‹•å‡ç´šç‚º Masterï¼Œä¿æŒé«˜å¯ç”¨ã€‚
- **é©ç”¨å¤§è³‡æ–™èˆ‡é«˜ä½µç™¼æ‡‰ç”¨**ã€‚

### ðŸŽ¯ é©åˆå ´æ™¯

| æ‡‰ç”¨æƒ…å¢ƒ         | èªªæ˜Ž                                |
|------------------|-------------------------------------|
| é«˜æµé‡æœå‹™       | å¦‚ç¤¾ç¾¤å¹³å°ã€éŠæˆ²ä¼ºæœå™¨             |
| å·¨é‡ Key/Value å„²å­˜ | å–®æ©Ÿç„¡æ³•æ‰¿è¼‰å¤§é‡è³‡æ–™             |
| åˆ†æ•£å¼æž¶æ§‹å¾®æœå‹™ | è·¨æœå‹™å…±ç”¨è³‡æ–™å¿«å–                 |
| è‡ªå‹•æ“´å±•èˆ‡é«˜å¯ç”¨ | é›²åŽŸç”Ÿæž¶æ§‹æˆ–å¤šå€éƒ¨ç½²éœ€æ±‚           |

### âŒ é™åˆ¶èˆ‡æ³¨æ„

- ä¸é©ç”¨åˆ†å¸ƒå¼éŽ–ç­‰å¼·ä¸€è‡´æ€§éœ€æ±‚
- å¤š key æ“ä½œéœ€è½åœ¨åŒä¸€ slotï¼ˆä½¿ç”¨ `{}` hash tagï¼‰
- å®¢æˆ¶ç«¯éœ€æ”¯æ´ cluster æ¨¡å¼èˆ‡ `MOVED` æŒ‡ä»¤

---

## ðŸ›¡ Redis Sentinel

### âœ… å„ªé»ž

- **è‡ªå‹•ä¸»å¾žåˆ‡æ›**ï¼šMaster æŽ›æŽ‰æ™‚ï¼Œè‡ªå‹•å‡ç´š Replica
- **ç°¡å–®éƒ¨ç½²**ï¼šé©ç”¨å–®ä¾‹ Redis æž¶æ§‹ï¼Œè¨­å®šç°¡æ˜“
- **èˆ‡ Redis æŒ‡ä»¤é«˜åº¦ç›¸å®¹**
- **é©åˆå¼·ä¸€è‡´æ€§ç”¨é€”ï¼ˆå¦‚åˆ†å¸ƒå¼éŽ–ï¼‰**

### ðŸŽ¯ é©åˆå ´æ™¯

| æ‡‰ç”¨æƒ…å¢ƒ     | èªªæ˜Ž                                |
|--------------|-------------------------------------|
| åˆ†å¸ƒå¼éŽ–     | å¦‚ SETNX, INCR, MULTI/EXEC ç­‰åŽŸå­æ“ä½œ |
| å°åž‹æœå‹™     | å–®é»žå¯«å…¥è¶³å¤ ï¼Œä»éœ€é«˜å¯ç”¨ä¿è­·       |
| é‡‘æµ / ä»»å‹™éšŠåˆ— | å¼·ä¸€è‡´æ€§èˆ‡å¤±æ•—ä¿è­·å„ªå…ˆ             |
| ç¨ç«‹ç·©å­˜ç¯€é»ž | æŸäº›å¾®æœå‹™å°ˆç”¨ç·©å­˜ï¼ˆéžå…±äº«åž‹æ…‹ï¼‰     |

---

## ðŸ” Cluster vs Sentinel å°æ¯”ç¸½è¡¨

| é …ç›®              | Redis Cluster | Redis Sentinel |
|-------------------|----------------|----------------|
| æ“´å±•æ€§            | âœ… æ°´å¹³æ“´å±•    | âŒ å–®ä¸€ä¸»ç¯€é»ž  |
| é«˜å¯ç”¨            | âœ… è‡ªå‹• Failover | âœ… è‡ªå‹•é¸ä¸»  |
| è³‡æ–™ä¸€è‡´æ€§        | æœ€çµ‚ä¸€è‡´æ€§     | å¼·ä¸€è‡´æ€§       |
| å¤š key åŽŸå­æ“ä½œ   | â›” ä¸å»ºè­°       | âœ… æ”¯æ´        |
| åˆ†å¸ƒå¼éŽ–æ”¯æ´      | â›” ä¸é©åˆ       | âœ… é©ç”¨        |
| éƒ¨ç½²è¤‡é›œåº¦        | â›” é«˜           | âœ… ç°¡å–®        |

---

## ðŸ§© è£œå……åœ–ç¤º

## Redis Cluster æž¶æ§‹
```mermaid
flowchart TD
    A[Client] -->|hash slot| M1[Master 1]
    A -->|hash slot| M2[Master 2]
    A -->|hash slot| M3[Master 3]

    M1 --> R1[Replica 1]
    M2 --> R2[Replica 2]
    M3 --> R3[Replica 3]
```
--- 

## Redis Sentinel æž¶æ§‹

```mermaid
flowchart TD
    C[Client] --> S1[Sentinel 1]
    C --> S2[Sentinel 2]
    C --> S3[Sentinel 3]

    S1 --> M[Master Redis]
    S2 --> M
    S3 --> M

    M --> R1[Replica Redis]
    M --> R2[Replica Redis]
```