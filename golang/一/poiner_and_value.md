
## Golang 指標與值接收者（Pointer vs Value Receiver）

在 Golang 中，方法的接收者（receiver）可以是值（Value）或指標（Pointer）。這個選擇對物件的行為、效能與一致性有重要影響，特別是在設計大型系統或團隊開發時。

---

### ✅ 值接收者（Value Receiver）

```go
func (u User) SayHello() {
    fmt.Println("Hello,", u.Name)
}
```

#### 特性：
- 方法接收的是原本物件的 **複本（copy）**
- 不會改變原物件的狀態
- 適合 **小型 struct** 或 **不需要修改內部狀態的行為**

#### 使用情境：
- 結構體較小（ex: 幾個欄位）
- 方法只做 read 操作
- 類似「工具類型方法」（utility）

---

### ✅ 指標接收者（Pointer Receiver）

```go
func (u *User) SetName(name string) {
    u.Name = name
}
```

#### 特性：
- 方法接收的是 **記憶體位置（參照）**
- 可直接修改原始物件的欄位
- 避免大結構複製的效能開銷

#### 使用情境：
- 要修改物件狀態（如 setter）
- 結構體較大（ex: 有 map, slice 等內嵌結構）
- 希望和指標型參數使用一致性

---

### 🧠 注意事項與最佳實踐

1. **一致性很重要**：
   - 一個 struct 的方法應儘量 **全部都用值或全部都用指標**
   - 混用會讓呼叫方混淆，也可能造成不預期的行為

2. **interface 隱性行為差異**：
   - 指標接收者的方法，不會被值類型自動實作
   - 例如：只有 `*User` 實作 `Doer` interface，`User` 本身就不符合

3. **效能考量**：
   - 大型 struct 傳值會產生不必要的記憶體複製
   - 使用指標可避免

---

### 📌 面試常見提問點
- 何時該用指標接收者？何時用值？
- interface 定義為指標接收者會有什麼影響？
- 有沒有遇過錯用值/指標造成 bug？怎麼發現與修正？

---

### ✅ 總結
| 類型 | 是否可修改原物件 | 是否避免複製 | 建議情境 |
|------|------------------|--------------|-----------|
| 值接收者 | ❌ 否 | ❌ 否 | 讀取、小結構 |
| 指標接收者 | ✅ 是 | ✅ 是 | 修改、大結構 |

---

面試時，能說清楚這些差異，並輔以實際案例（如你在哪個專案中用錯過造成錯誤）會有很大加分。
